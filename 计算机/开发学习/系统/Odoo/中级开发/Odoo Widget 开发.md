# Odoo Widget å¼€å‘ä¸ä½¿ç”¨æŒ‡å—

---

## 1. æ ¸å¿ƒæ¦‚å¿µ

- **Widgetï¼ˆå°éƒ¨ä»¶ï¼‰** æ˜¯ Odoo å‰ç«¯è§†å›¾ä¸­å¯¹å­—æ®µæˆ–è¡¨å•çš„è‡ªå®šä¹‰å±•ç¤ºå’Œäº¤äº’æ§ä»¶
    
- **ä½œç”¨**ï¼š
    
    1. æä¾›è‡ªå®šä¹‰å­—æ®µå±•ç¤ºæ–¹å¼
        
    2. å¢å¼ºç”¨æˆ·äº¤äº’ä½“éªŒ
        
    3. æ”¯æŒå¤æ‚æ•°æ®å¯è§†åŒ–
        
- **åº”ç”¨åœºæ™¯**ï¼š
    
    - æ—¥æœŸé€‰æ‹©å™¨ã€é¢œè‰²é€‰æ‹©å™¨ã€è¿›åº¦æ¡ã€æ¡å½¢å›¾
        
    - æ–‡ä»¶ä¸Šä¼ ã€å›¾ç‰‡é¢„è§ˆã€åŠ¨æ€è¡¨æ ¼
        
    - è‡ªå®šä¹‰è¡¨å•è¡Œä¸º
        

---

## 2. Widget åˆ†ç±»

|åˆ†ç±»|æè¿°|ç¤ºä¾‹|
|---|---|---|
|**åŸºç¡€å­—æ®µ Widget**|æ”¹å˜å­—æ®µæ˜¾ç¤ºæ ·å¼|`boolean_toggle`, `statusbar`|
|**æ—¥æœŸ/æ—¶é—´ Widget**|æ—¥æœŸæˆ–æ—¶é—´é€‰æ‹©æ§ä»¶|`date`, `datetime`|
|**æ–‡ä»¶ Widget**|æ–‡ä»¶ä¸Šä¼ æˆ–æ˜¾ç¤º|`many2many_binary`, `image`|
|**è¿›åº¦/å¯è§†åŒ– Widget**|å›¾è¡¨ã€è¿›åº¦æ¡|`progressbar`, `kanban_badge`|
|**è‡ªå®šä¹‰ Widget**|è‡ªå®šä¹‰ JS æ§ä»¶|è‡ªå®šä¹‰è¡¨å•å­—æ®µå±•ç¤ºã€å¤æ‚äº¤äº’|

---

## 3. å‰ç«¯å¼€å‘ç»“æ„

### 3.1 ç›®å½•ç»“æ„

```
my_module/
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ src/js/
â”‚   â”‚   â””â”€â”€ my_widget.js
â”‚   â””â”€â”€ description/
â””â”€â”€ views/
    â””â”€â”€ form_view.xml

```

### 3.2 JS Widget ç¤ºä¾‹ï¼ˆåŸºç¡€å†™æ³•ï¼‰

```
odoo.define('my_module.MyWidget', function (require) {
    "use strict";

    var fieldRegistry = require('web.field_registry');
    var FieldChar = require('web.basic_fields').FieldChar;

    var MyWidget = FieldChar.extend({
        // æ¸²æŸ“å­—æ®µå€¼
        _render: function () {
            this.$el.text("ğŸ”¥ " + (this.value || ""));
        },
    });

    fieldRegistry.add('my_widget', MyWidget);
});

```

- `_render()` æ–¹æ³•ï¼šæ¸²æŸ“å­—æ®µæ˜¾ç¤º
    
- `fieldRegistry.add('my_widget', MyWidget)`ï¼šæ³¨å†Œè‡ªå®šä¹‰ Widget
    

---

## 4. åœ¨ XML è§†å›¾ä¸­ä½¿ç”¨ Widget

`<field name="name" widget="my_widget"/>`

- `widget` å±æ€§æŒ‡å®š Widget ç±»å‹
    
- æ”¯æŒç³»ç»Ÿå†…ç½® Widget å’Œè‡ªå®šä¹‰ Widget
    

---

## 5. å†…ç½® Widget å¸¸ç”¨ç¤ºä¾‹

|Widget|æè¿°|
|---|---|
|`statusbar`|çŠ¶æ€æ¡æ˜¾ç¤º|
|`progressbar`|è¿›åº¦æ¡æ˜¾ç¤º|
|`many2many_tags`|å¤šé€‰æ ‡ç­¾å±•ç¤º|
|`image`|å›¾ç‰‡æ˜¾ç¤ºä¸ä¸Šä¼ |
|`monetary`|è´§å¸æ˜¾ç¤ºæ ¼å¼|
|`handle`|æ‹–æ‹½æ’åº|
|`radio` / `selection`|å•é€‰å­—æ®µæ˜¾ç¤º|
|`email`|é‚®ä»¶å­—æ®µè¶…é“¾æ¥|

---

## 6. é«˜çº§ç‰¹æ€§

1. **äº‹ä»¶ç»‘å®š**
    

`this.$el.on('click', this._onClick.bind(this));`

2. **è®¿é—® ORM æ•°æ®**
    

```
this._rpc({
    model: 'res.partner',
    method: 'search_read',
    args: [[['customer','=',true]], ['name','email']]
}).then(function(result){
    console.log(result);
});

```

3. **ç»„åˆ Widget**
    

- Widget å†…åµŒ Widgetï¼Œä¾‹å¦‚ Kanban å¡ç‰‡å†…ä½¿ç”¨è¿›åº¦æ¡ Widget
    

4. **åŠ¨æ€æ ·å¼ä¸åŠ¨ç”»**
    

- å¯é€šè¿‡ jQuery / CSS æ§åˆ¶æ˜¾ç¤ºæ•ˆæœ
    

---

## 7. å®é™…åº”ç”¨åœºæ™¯

|åœºæ™¯|æè¿°|
|---|---|
|è‡ªå®šä¹‰è¡¨å•å­—æ®µ|ç‰¹æ®Šæ˜¾ç¤ºéœ€æ±‚ï¼Œä¾‹å¦‚å¸¦å›¾æ ‡çš„å­—ç¬¦å­—æ®µ|
|ä»ªè¡¨ç›˜|è¿›åº¦æ¡ã€å›¾è¡¨ã€æŒ‡æ ‡æ˜¾ç¤º|
|æ–‡ä»¶ç®¡ç†|æ–‡ä»¶ä¸Šä¼ ã€å›¾ç‰‡é¢„è§ˆã€å°ç»„ä»¶åˆ—è¡¨|
|çŠ¶æ€æ§åˆ¶|çŠ¶æ€æ¡ã€æŒ‰é’®æ“ä½œã€æ‹–æ‹½æ’åº|
|åŠ¨æ€æ•°æ®å±•ç¤º|æ ¹æ®æ¡ä»¶åŠ¨æ€æ¸²æŸ“å­—æ®µå†…å®¹|

---

## 8. å¼€å‘æµç¨‹æ€»ç»“

1. **åˆ†æéœ€æ±‚** â†’ å†³å®š Widget ç±»å‹
    
2. **åˆ›å»º JS æ–‡ä»¶** â†’ å®šä¹‰ Widget ç±»
    
3. **æ³¨å†Œ Widget** â†’ fieldRegistry.add()
    
4. **XML è§†å›¾è°ƒç”¨** â†’ `<field name="xxx" widget="my_widget"/>`
    
5. **æµ‹è¯•ä¸ä¼˜åŒ–** â†’ æ ·å¼ã€äº‹ä»¶ç»‘å®šã€æ•°æ®æ¸²æŸ“